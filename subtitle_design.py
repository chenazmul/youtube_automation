# subtitle_design.py ‡¶è ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®
import pysubs2
import hashlib
import os

def apply_design(subs, is_short=False, filename="unknown"):
    """‡¶∏‡¶æ‡¶¨‡¶ü‡¶æ‡¶á‡¶ü‡ßá‡¶≤ ‡¶°‡¶ø‡¶ú‡¶æ‡¶á‡¶® ‡¶™‡ßç‡¶∞‡¶Ø‡¶º‡ßã‡¶ó ‡¶ï‡¶∞‡ßá - ‡¶´‡¶æ‡¶á‡¶≤‡¶®‡¶æ‡¶Æ ‡¶≠‡¶ø‡¶§‡ßç‡¶§‡¶ø‡¶ï ‡¶°‡¶ø‡¶ú‡¶æ‡¶á‡¶® ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶ï‡¶∞‡ßá"""
    
    # ‡¶´‡¶æ‡¶á‡¶≤‡¶®‡¶æ‡¶Æ ‡¶•‡ßá‡¶ï‡ßá ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ ‡¶á‡¶®‡¶°‡ßá‡¶ï‡ßç‡¶∏ ‡¶®‡¶ø‡¶∞‡ßç‡¶ß‡¶æ‡¶∞‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®
    # ‡¶è‡¶§‡ßá ‡¶ï‡¶∞‡ßá ‡¶è‡¶ï‡¶á ‡¶´‡¶æ‡¶á‡¶≤‡ßá ‡¶∏‡¶¨‡¶∏‡¶Æ‡¶Ø‡¶º ‡¶è‡¶ï‡¶á ‡¶°‡¶ø‡¶ú‡¶æ‡¶á‡¶®, ‡¶ï‡¶ø‡¶®‡ßç‡¶§‡ßÅ ‡¶≠‡¶ø‡¶®‡ßç‡¶® ‡¶´‡¶æ‡¶á‡¶≤‡ßá ‡¶≠‡¶ø‡¶®‡ßç‡¶® ‡¶°‡¶ø‡¶ú‡¶æ‡¶á‡¶®
    hasher = hashlib.md5(filename.encode())
    style_index = int(hasher.hexdigest(), 16) % 10  # 0-9 ‡¶è‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶è‡¶ï‡¶ü‡¶ø ‡¶á‡¶®‡¶°‡ßá‡¶ï‡ßç‡¶∏
    
    print(f"üîπ Using style index {style_index} for file: {filename}")
    
    # 10‡¶ü‡¶ø ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶≠‡¶ø‡¶®‡ßç‡¶® ‡¶°‡¶ø‡¶ú‡¶æ‡¶á‡¶® (‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ü‡¶ó‡ßá‡¶∞ ‡¶ï‡ßã‡¶° ‡¶Ö‡¶®‡ßÅ‡¶∏‡¶æ‡¶∞‡ßá)
    styles = [
        # ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ 0: ‡¶∏‡¶æ‡¶¶‡¶æ ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü, ‡¶®‡¶ø‡¶ì‡¶® ‡¶ó‡ßç‡¶∞‡¶ø‡¶® ‡¶Ü‡¶â‡¶ü‡¶≤‡¶æ‡¶á‡¶®
        {
            "font": "Arial", 
            "size": 25 if is_short else 32,
            "primary": (255, 255, 255),  # ‡¶∏‡¶æ‡¶¶‡¶æ
            "outline": (0, 255, 0),      # ‡¶®‡¶ø‡¶ì‡¶® ‡¶ó‡ßç‡¶∞‡¶ø‡¶®
            "shadow": (0, 100, 0, 180),  # ‡¶°‡¶æ‡¶∞‡ßç‡¶ï ‡¶ó‡ßç‡¶∞‡¶ø‡¶® ‡¶∂‡ßç‡¶Ø‡¶æ‡¶°‡ßã
            "back": (0, 0, 0, 160),      # ‡¶¨‡ßç‡¶≤‡ßç‡¶Ø‡¶æ‡¶ï ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶ó‡ßç‡¶∞‡¶æ‡¶â‡¶®‡ßç‡¶°
            "border_style": 1,           # ‡¶Ü‡¶â‡¶ü‡¶≤‡¶æ‡¶á‡¶® + ‡¶∂‡ßç‡¶Ø‡¶æ‡¶°‡ßã
        },
        
        # ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ 1: ‡¶∏‡¶æ‡¶¶‡¶æ ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü, ‡¶®‡¶ø‡¶ì‡¶® ‡¶™‡¶ø‡¶ô‡ßç‡¶ï ‡¶Ü‡¶â‡¶ü‡¶≤‡¶æ‡¶á‡¶®
        {
            "font": "Verdana", 
            "size": 24 if is_short else 30,
            "primary": (255, 255, 255),  # ‡¶∏‡¶æ‡¶¶‡¶æ 
            "outline": (255, 0, 128),    # ‡¶®‡¶ø‡¶ì‡¶® ‡¶™‡¶ø‡¶ô‡ßç‡¶ï
            "shadow": (100, 0, 50, 160), # ‡¶™‡¶ø‡¶ô‡ßç‡¶ï ‡¶∂‡ßç‡¶Ø‡¶æ‡¶°‡ßã
            "back": (0, 0, 0, 150),      # ‡¶¨‡ßç‡¶≤‡ßç‡¶Ø‡¶æ‡¶ï ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶ó‡ßç‡¶∞‡¶æ‡¶â‡¶®‡ßç‡¶°
            "border_style": 3,           # ‡¶¨‡¶ï‡ßç‡¶∏ ‡¶¨‡¶∞‡ßç‡¶°‡¶æ‡¶∞
        },
        
        # ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ 2: ‡¶ó‡ßã‡¶≤‡ßç‡¶°‡ßá‡¶® ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü, ‡¶°‡¶æ‡¶∞‡ßç‡¶ï ‡¶¨‡ßç‡¶≤‡ßÅ ‡¶Ü‡¶â‡¶ü‡¶≤‡¶æ‡¶á‡¶®
        {
            "font": "Impact", 
            "size": 28 if is_short else 34,
            "primary": (255, 215, 0),    # ‡¶ó‡ßã‡¶≤‡ßç‡¶°
            "outline": (0, 0, 128),      # ‡¶°‡¶æ‡¶∞‡ßç‡¶ï ‡¶¨‡ßç‡¶≤‡ßÅ
            "shadow": (0, 0, 60, 180),   # ‡¶¨‡ßç‡¶≤‡ßÅ ‡¶∂‡ßç‡¶Ø‡¶æ‡¶°‡ßã
            "back": (0, 0, 20, 170),     # ‡¶°‡¶æ‡¶∞‡ßç‡¶ï ‡¶¨‡ßç‡¶≤‡ßÅ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶ó‡ßç‡¶∞‡¶æ‡¶â‡¶®‡ßç‡¶°
            "border_style": 1,           # ‡¶Ü‡¶â‡¶ü‡¶≤‡¶æ‡¶á‡¶® + ‡¶∂‡ßç‡¶Ø‡¶æ‡¶°‡ßã
        },
        
        # ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ 3: ‡¶®‡¶ø‡¶ì‡¶® ‡¶¨‡ßç‡¶≤‡ßÅ ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü, ‡¶™‡¶æ‡¶∞‡¶™‡¶≤ ‡¶Ü‡¶â‡¶ü‡¶≤‡¶æ‡¶á‡¶®
        {
            "font": "Tahoma", 
            "size": 26 if is_short else 32,
            "primary": (0, 255, 255),    # ‡¶∏‡¶æ‡¶á‡¶®‡¶ø
            "outline": (128, 0, 128),    # ‡¶™‡¶æ‡¶∞‡¶™‡¶≤
            "shadow": (60, 0, 60, 160),  # ‡¶™‡¶æ‡¶∞‡¶™‡¶≤ ‡¶∂‡ßç‡¶Ø‡¶æ‡¶°‡ßã
            "back": (10, 0, 20, 150),    # ‡¶°‡¶æ‡¶∞‡ßç‡¶ï ‡¶™‡¶æ‡¶∞‡¶™‡¶≤ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶ó‡ßç‡¶∞‡¶æ‡¶â‡¶®‡ßç‡¶°
            "border_style": 3,           # ‡¶¨‡¶ï‡ßç‡¶∏ ‡¶¨‡¶∞‡ßç‡¶°‡¶æ‡¶∞
        },
        
        # ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ 4: ‡¶®‡¶ø‡¶ì‡¶® ‡¶∞‡ßá‡¶° ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü, ‡¶°‡¶æ‡¶∞‡ßç‡¶ï ‡¶∂‡ßç‡¶Ø‡¶æ‡¶°‡ßã
        {
            "font": "Arial Black", 
            "size": 24 if is_short else 30,
            "primary": (255, 0, 0),      # ‡¶∞‡ßá‡¶°
            "outline": (0, 0, 0),        # ‡¶¨‡ßç‡¶≤‡ßç‡¶Ø‡¶æ‡¶ï
            "shadow": (30, 0, 0, 180),   # ‡¶°‡¶æ‡¶∞‡ßç‡¶ï ‡¶∞‡ßá‡¶° ‡¶∂‡ßç‡¶Ø‡¶æ‡¶°‡ßã
            "back": (10, 0, 0, 160),     # ‡¶¨‡ßç‡¶≤‡ßç‡¶Ø‡¶æ‡¶ï‡¶ø‡¶∂ ‡¶∞‡ßá‡¶° ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶ó‡ßç‡¶∞‡¶æ‡¶â‡¶®‡ßç‡¶°
            "border_style": 1,           # ‡¶Ü‡¶â‡¶ü‡¶≤‡¶æ‡¶á‡¶® + ‡¶∂‡ßç‡¶Ø‡¶æ‡¶°‡ßã
        },
        
        # ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ 5: ‡¶á‡¶Ø‡¶º‡ßá‡¶≤‡ßã ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü, ‡¶¨‡ßç‡¶≤‡ßç‡¶Ø‡¶æ‡¶ï ‡¶Ü‡¶â‡¶ü‡¶≤‡¶æ‡¶á‡¶®
        {
            "font": "Segoe UI", 
            "size": 26 if is_short else 32,
            "primary": (255, 255, 0),    # ‡¶á‡¶Ø‡¶º‡ßá‡¶≤‡ßã
            "outline": (0, 0, 0),        # ‡¶¨‡ßç‡¶≤‡ßç‡¶Ø‡¶æ‡¶ï
            "shadow": (40, 40, 0, 160),  # ‡¶°‡¶æ‡¶∞‡ßç‡¶ï ‡¶á‡¶Ø‡¶º‡ßá‡¶≤‡ßã ‡¶∂‡ßç‡¶Ø‡¶æ‡¶°‡ßã
            "back": (20, 20, 0, 140),    # ‡¶°‡¶æ‡¶∞‡ßç‡¶ï ‡¶á‡¶Ø‡¶º‡ßá‡¶≤‡ßã‡¶á‡¶∂ ‡¶¨‡ßç‡¶≤‡ßç‡¶Ø‡¶æ‡¶ï
            "border_style": 3,           # ‡¶¨‡¶ï‡ßç‡¶∏ ‡¶¨‡¶∞‡ßç‡¶°‡¶æ‡¶∞
        },
        
        # ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ 6: ‡¶™‡¶ø‡¶ì‡¶∞ ‡¶π‡ßã‡¶Ø‡¶º‡¶æ‡¶á‡¶ü ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü, ‡¶¨‡ßç‡¶≤‡ßç‡¶Ø‡¶æ‡¶ï ‡¶Ü‡¶â‡¶ü‡¶≤‡¶æ‡¶á‡¶®
        {
            "font": "Franklin Gothic Medium", 
            "size": 27 if is_short else 33,
            "primary": (255, 255, 255),  # ‡¶™‡¶ø‡¶ì‡¶∞ ‡¶π‡ßã‡¶Ø‡¶º‡¶æ‡¶á‡¶ü
            "outline": (0, 0, 0),        # ‡¶¨‡ßç‡¶≤‡ßç‡¶Ø‡¶æ‡¶ï
            "shadow": (50, 50, 50, 180), # ‡¶ó‡ßç‡¶∞‡ßá ‡¶∂‡ßç‡¶Ø‡¶æ‡¶°‡ßã
            "back": (0, 0, 0, 150),      # ‡¶¨‡ßç‡¶≤‡ßç‡¶Ø‡¶æ‡¶ï ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶ó‡ßç‡¶∞‡¶æ‡¶â‡¶®‡ßç‡¶°
            "border_style": 1,           # ‡¶Ü‡¶â‡¶ü‡¶≤‡¶æ‡¶á‡¶® + ‡¶∂‡ßç‡¶Ø‡¶æ‡¶°‡ßã
        },
        
        # ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ 7: ‡¶Ö‡¶∞‡ßá‡¶û‡ßç‡¶ú ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü, ‡¶°‡¶æ‡¶∞‡ßç‡¶ï ‡¶∞‡ßá‡¶° ‡¶Ü‡¶â‡¶ü‡¶≤‡¶æ‡¶á‡¶®
        {
            "font": "Candara", 
            "size": 25 if is_short else 31,
            "primary": (255, 165, 0),    # ‡¶Ö‡¶∞‡ßá‡¶û‡ßç‡¶ú
            "outline": (139, 0, 0),      # ‡¶°‡¶æ‡¶∞‡ßç‡¶ï ‡¶∞‡ßá‡¶°
            "shadow": (60, 30, 0, 160),  # ‡¶¨‡ßç‡¶∞‡¶æ‡¶â‡¶®‡¶ø‡¶∂ ‡¶∂‡ßç‡¶Ø‡¶æ‡¶°‡ßã
            "back": (20, 10, 0, 150),    # ‡¶¨‡ßç‡¶≤‡ßç‡¶Ø‡¶æ‡¶ï‡¶ø‡¶∂ ‡¶¨‡ßç‡¶∞‡¶æ‡¶â‡¶®
            "border_style": 3,           # ‡¶¨‡¶ï‡ßç‡¶∏ ‡¶¨‡¶∞‡ßç‡¶°‡¶æ‡¶∞
        },
        
        # ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ 8: ‡¶≤‡¶æ‡¶á‡¶Æ ‡¶ó‡ßç‡¶∞‡¶ø‡¶® ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü, ‡¶°‡¶æ‡¶∞‡ßç‡¶ï ‡¶ó‡ßç‡¶∞‡¶ø‡¶® ‡¶Ü‡¶â‡¶ü‡¶≤‡¶æ‡¶á‡¶®
        {
            "font": "Calibri", 
            "size": 24 if is_short else 32,
            "primary": (50, 205, 50),    # ‡¶≤‡¶æ‡¶á‡¶Æ ‡¶ó‡ßç‡¶∞‡¶ø‡¶®
            "outline": (0, 100, 0),      # ‡¶°‡¶æ‡¶∞‡ßç‡¶ï ‡¶ó‡ßç‡¶∞‡¶ø‡¶®
            "shadow": (0, 50, 0, 160),   # ‡¶ó‡ßç‡¶∞‡¶ø‡¶® ‡¶∂‡ßç‡¶Ø‡¶æ‡¶°‡ßã
            "back": (0, 20, 0, 140),     # ‡¶°‡¶æ‡¶∞‡ßç‡¶ï ‡¶ó‡ßç‡¶∞‡¶ø‡¶® ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶ó‡ßç‡¶∞‡¶æ‡¶â‡¶®‡ßç‡¶°
            "border_style": 1,           # ‡¶Ü‡¶â‡¶ü‡¶≤‡¶æ‡¶á‡¶® + ‡¶∂‡ßç‡¶Ø‡¶æ‡¶°‡ßã
        },
        
        # ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ 9: ‡¶¨‡¶æ‡¶á‡¶ó‡¶® ‡¶Ö‡¶∞‡ßá‡¶û‡ßç‡¶ú ‡¶ï‡¶Æ‡ßç‡¶¨‡ßã
        {
            "font": "Corbel", 
            "size": 24 if is_short else 30,
            "primary": (255, 99, 71),    # ‡¶ü‡¶Æ‡¶æ‡¶ü‡ßã
            "outline": (106, 90, 205),   # ‡¶∏‡ßç‡¶≤‡ßá‡¶ü‡¶¨‡ßç‡¶≤‡ßÅ
            "shadow": (60, 50, 80, 160), # ‡¶™‡¶æ‡¶∞‡¶™‡ßç‡¶≤‡¶ø‡¶∂ ‡¶¨‡ßç‡¶≤‡ßÅ ‡¶∂‡ßç‡¶Ø‡¶æ‡¶°‡ßã
            "back": (30, 20, 40, 150),   # ‡¶°‡¶æ‡¶∞‡ßç‡¶ï ‡¶™‡¶æ‡¶∞‡¶™‡¶≤
            "border_style": 3,           # ‡¶¨‡¶ï‡ßç‡¶∏ ‡¶¨‡¶∞‡ßç‡¶°‡¶æ‡¶∞
        },
    ]
    
    # ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶ø‡¶§ ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ ‡¶™‡¶æ‡¶®
    selected_style = styles[style_index]
    
    # ‡¶°‡¶ø‡¶ú‡¶æ‡¶á‡¶® ‡¶™‡ßç‡¶∞‡¶Ø‡¶º‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®
    subs.styles["Default"].fontname = selected_style["font"]
    subs.styles["Default"].fontsize = selected_style["size"]
    
    # ‡¶ï‡¶æ‡¶≤‡¶æ‡¶∞ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡ßç‡¶≤‡¶æ‡¶á ‡¶ï‡¶∞‡ßÅ‡¶®
    subs.styles["Default"].primarycolor = pysubs2.Color(*selected_style["primary"], 0)  # BGRA format
    subs.styles["Default"].outlinecolor = pysubs2.Color(*selected_style["outline"], 0)
    subs.styles["Default"].backcolor = pysubs2.Color(*selected_style["back"])
    subs.styles["Default"].shadowcolor = pysubs2.Color(0, 0, 0, 255)  # ‡¶°‡¶ø‡¶´‡¶≤‡ßç‡¶ü ‡¶∂‡ßç‡¶Ø‡¶æ‡¶°‡ßã
    
    # ‡¶¨‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ ‡¶ì ‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø ‡¶™‡ßç‡¶Ø‡¶æ‡¶∞‡¶æ‡¶Æ‡¶ø‡¶ü‡¶æ‡¶∞
    subs.styles["Default"].borderstyle = selected_style["border_style"]
    subs.styles["Default"].outline = 2.5 if is_short else 3.0  # ‡¶Ü‡¶â‡¶ü‡¶≤‡¶æ‡¶á‡¶® ‡¶õ‡ßã‡¶ü/‡¶¨‡¶°‡¶º ‡¶ï‡¶∞‡ßÅ‡¶®
    subs.styles["Default"].shadow = 1.5  # ‡¶∂‡ßç‡¶Ø‡¶æ‡¶°‡ßã ‡¶°‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶∏
    subs.styles["Default"].alignment = 2  # ‡¶∏‡ßá‡¶®‡ßç‡¶ü‡¶æ‡¶∞ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶≤‡¶æ‡¶á‡¶®‡¶Æ‡ßá‡¶®‡ßç‡¶ü
    subs.styles["Default"].marginv = 50 if is_short else 70  # ‡¶Æ‡¶æ‡¶∞‡ßç‡¶ú‡¶ø‡¶® ‡¶è‡¶°‡¶ú‡¶æ‡¶∏‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®
    
    # ‡¶¨‡ßã‡¶≤‡ßç‡¶° ‡¶è‡¶¨‡¶Ç ‡¶á‡¶ü‡¶æ‡¶≤‡¶ø‡¶ï ‡¶∞‚Äç‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°‡¶Æ‡¶æ‡¶á‡¶ú ‡¶ï‡¶∞‡ßÅ‡¶®
    subs.styles["Default"].bold = (style_index % 2 == 0)  # ‡¶ú‡ßã‡¶°‡¶º ‡¶á‡¶®‡¶°‡ßá‡¶ï‡ßç‡¶∏‡ßá ‡¶¨‡ßã‡¶≤‡ßç‡¶°
    subs.styles["Default"].italic = False  # ‡¶á‡¶ü‡¶æ‡¶≤‡¶ø‡¶ï ‡¶¨‡¶®‡ßç‡¶ß ‡¶∞‡¶æ‡¶ñ‡ßÅ‡¶®
    
    print(f"‚úÖ Applied style #{style_index}: {selected_style['font']} with {selected_style['primary']} color")
    
    return subs